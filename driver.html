<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Driver Portal | Left Door Shut Dispatch</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="main-header">
  <img src="logo.png" alt="Left Door Shut Dispatch Logo" class="logo">
  <div class="portal-title">Driver Portal</div>
  <button class="logout-btn" onclick="logout()">Logout</button>
</header>

<!-- ===== DRIVER PROFILE ===== -->
<section class="driver-profile">
  <h2>Driver Profile</h2>

  <label>Driver Name</label>
  <input type="text" id="driverName">

  <label>Truck Number</label>
  <input type="text" id="truckNumber">

  <label>Trailer Type</label>
  <select id="trailerType">
    <option value="">Select trailer</option>
    <option>Dry Van</option>
    <option>Reefer</option>
    <option>Flatbed</option>
    <option>Power Only</option>
  </select>

  <label>Factoring Company</label>
  <select id="factoringCompany">
    <option value="">Select factoring company</option>
    <option>TBS Factoring</option>
    <option>RTS Financial</option>
    <option>Triumph Business Capital</option>
    <option>OTR Capital</option>
    <option>Other</option>
  </select>

  <label>Lumper Fee (Manual Entry)</label>
  <input type="number" id="lumperFee" placeholder="$0.00">

  <button onclick="saveDriverProfile()">Save Profile</button>
  <p id="saveStatus"></p>
</section>

<!-- ===== CONTRACTS ===== -->
<section class="contracts">
  <h2>Contracts</h2>
  <ul>
    <li><a href="contracts/contract-a.html" target="_blank">Driver Contract</a></li>
    <li><a href="contracts/contract-b.html" target="_blank">Power of Attorney (Optional)</a></li>
    <li><a href="contracts/contract-c.html" target="_blank">Dispatch Agreement</a></li>
  </ul>
</section>

<!-- ===== UPLOAD ACCESS ===== -->
<section class="uploads">
  <h2>Upload Access</h2>
  <p>Status: <strong id="uploadStatus">LOCKED</strong></p>
  <button onclick="toggleUploads()">Toggle Upload Lock</button>
</section>

<!-- ===== JAVASCRIPT ===== -->
<script>
/* ===== LOGOUT ===== */
function logout() {
  alert("Logged out");
  window.location.href = "index.html";
}

/* ===== UPLOAD LOCK ===== */
function toggleUploads() {
  const status = document.getElementById("uploadStatus");
  if (status.innerText === "LOCKED") {
    status.innerText = "UNLOCKED";
    alert("Uploads unlocked.");
  } else {
    status.innerText = "LOCKED";
    alert("Uploads locked.");
  }
}

/* ===== SAVE DRIVER PROFILE ===== */
function saveDriverProfile() {
  const profile = {
    name: document.getElementById("driverName").value,
    truck: document.getElementById("truckNumber").value,
    trailer: document.getElementById("trailerType").value,
    factoring: document.getElementById("factoringCompany").value,
    lumper: document.getElementById("lumperFee").value
  };

  localStorage.setItem("driverProfile", JSON.stringify(profile));
  document.getElementById("saveStatus").innerText = "Profile saved successfully.";
}

/* ===== LOAD DRIVER PROFILE SAFELY ===== */
document.addEventListener("DOMContentLoaded", function () {
  const savedProfile = localStorage.getItem("driverProfile");
  if (savedProfile) {
    const profile = JSON.parse(savedProfile);
    document.getElementById("driverName").value = profile.name || "";
    document.getElementById("truckNumber").value = profile.truck || "";
    document.getElementById("trailerType").value = profile.trailer || "";
    document.getElementById("factoringCompany").value = profile.factoring || "";
    document.getElementById("lumperFee").value = profile.lumper || "";
  }
});
</script>

</body>
</html>
